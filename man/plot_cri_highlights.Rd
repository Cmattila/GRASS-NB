% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Results_generator.R
\name{plot_cri_highlights}
\alias{plot_cri_highlights}
\title{Plot ETI Credible Intervals Across Outcomes (with Highlighted Predictors)}
\usage{
plot_cri_highlights(
  outcomes,
  outcome_labels = NULL,
  betas = NULL,
  load_beta = NULL,
  method = "HS",
  predictors,
  predictor_labels = NULL,
  group_map = NULL,
  group_levels = NULL,
  use_groups = TRUE,
  intercept_names = c("(Intercept)", "Intercept", "beta0", "beta_0", ""),
  cred_level = 0.95,
  star = c("mean", "median"),
  x_order = c("group", "given"),
  colors = NULL,
  add_brackets = TRUE,
  legend_title = "Outcome",
  show_legend = NULL,
  verbose = TRUE,
  base_size = 22,
  bracket_text_size = 4.5,
  highlight_idx = integer(0),
  nonhighlight_alpha = 0.35,
  highlight_size_mult = 1.6,
  highlight_point_mult = 1.5
)
}
\arguments{
\item{outcomes}{Character vector of outcome keys to include.}

\item{outcome_labels}{Optional named character vector mapping outcome keys
in \code{outcomes} to pretty display labels. If \code{NULL}, keys are used.}

\item{betas}{Optional named list of posterior draws for each outcome. Each
element is a matrix (iterations x coefficients). If \code{NULL}, provide
\code{load_beta()}.}

\item{load_beta}{Optional function \code{function(outcome, method)} that
returns the posterior draws matrix for the requested \code{outcome}.
Used when \code{betas} is \code{NULL}.}

\item{method}{Character scalar passed to \code{load_beta()} (e.g., "HS", "SS").}

\item{predictors}{Character vector giving the predictors to display (order on x-axis).}

\item{predictor_labels}{Optional named character vector mapping predictor names
(levels on x-axis) to pretty labels.}

\item{group_map}{Optional named vector mapping each predictor to a group label.}

\item{group_levels}{Optional character vector specifying the display order of
group labels (required if \code{use_groups=TRUE}).}

\item{use_groups}{Logical; if \code{TRUE}, draws group brackets/labels under the x-axis.}

\item{intercept_names}{Character vector of column names treated as intercepts
to be dropped (e.g., \code{c("(Intercept)","Intercept","beta0","beta_0","")}).}

\item{cred_level}{Numeric in (0,1); ETI credible level (default 0.95).}

\item{star}{Either \code{"mean"} or \code{"median"}; which summary to show as the point.}

\item{x_order}{Either \code{"group"} (order predictors by \code{group_map})
or \code{"given"} (keep the input \code{predictors} order).}

\item{colors}{Optional named vector of colors for outcomes (applies to line/point color/fill).}

\item{add_brackets}{Logical; add group brackets under the x-axis when \code{use_groups=TRUE}.}

\item{legend_title}{Character; legend title for outcomes.}

\item{show_legend}{Logical; whether to show the legend. If \code{NULL}, shows
only when multiple outcomes are present.}

\item{verbose}{Logical; print simple diagnostics (loaded/skipped outcomes, coercions).}

\item{base_size}{Base font size for the theme.}

\item{bracket_text_size}{Font size for group labels under the axis.}

\item{highlight_idx}{Indices (1-based, in plotted x-axis order) \emph{or}
predictor names to highlight. Defaults to \code{integer(0)} (no highlights).}

\item{nonhighlight_alpha}{Numeric in \verb{[0,1]}; alpha used to fade non-highlighted
intervals/points (default 0.35).}

\item{highlight_size_mult}{Numeric > 0; thickness multiplier for highlighted
intervals (default 1.6 relative to base).}

\item{highlight_point_mult}{Numeric > 0; size multiplier for highlighted points
(default 1.5 relative to base).}
}
\value{
A list with:
\describe{
\item{\code{plot}}{A \pkg{ggplot2} object.}
\item{\code{data}}{Tidy data frame used to build the plot (per predictor x outcome).}
\item{\code{loaded}}{Diagnostics table of loaded outcomes.}
\item{\code{skipped}}{Diagnostics table of skipped outcomes (with reasons).}
}
}
\description{
Builds a comparative plot of posterior coefficients across one or more outcomes,
drawing Equal-Tailed Interval (ETI) credible intervals and a point summary
(mean or median) per predictor. Predictors can be ordered by groups and
optionally highlighted (by index or by name) to emphasize, e.g., truly
non-null features in simulations.
}
\details{
Each outcomeâ€™s posterior draw matrix may contain an intercept column; names
matching \code{intercept_names} are dropped. Remaining columns are aligned
to \code{predictors}; any missing predictors are filled with \code{NA} columns.
ETI bounds are computed via \pkg{bayestestR}. Highlights are overlaid on top
of the base plot (which is slightly faded by \code{nonhighlight_alpha}) while
preserving outcome colors.
}
\examples{
\dontrun{
# Suppose 'draws_HS' and 'draws_SS' are (iterations x p)
# matrices of posterior betas:
outcomes   <- c("HS","SS")
predictors <- paste0("X", 1:20)
res <- plot_cri_across_outcomes(
  outcomes   = outcomes,
  predictors = predictors,
  betas = list(HS = draws_HS, SS = draws_SS),
  x_order = "group",
  group_map = setNames(rep(letters[1:4], each = 5), predictors),
  group_levels = letters[1:4],
  cred_level = 0.95,
  star = "median",
  # highlight a few predictors (by index)
  highlight_idx = c(2, 7, 13),
  highlight_glow_color = "#1F77B4"
)
print(res$plot)

# Highlight by predictor names instead:
res2 <- plot_cri_across_outcomes(
  outcomes   = "HS",
  predictors = predictors,
  betas = list(HS = draws_HS),
  highlight_idx = c("X3","X10")
)
}

}
