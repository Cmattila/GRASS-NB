% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/Results_generator.R
\name{plot_pdelta_bars_mcmc}
\alias{plot_pdelta_bars_mcmc}
\title{Plot PIPs (pDelta) from MCMC outputs}
\usage{
plot_pdelta_bars_mcmc(
  predictors,
  pdelta_mat = NULL,
  outcome_name = NULL,
  pdelta_list = NULL,
  outcomes = NULL,
  outcome_labels = NULL,
  predictor_labels = NULL,
  group_map = NULL,
  group_levels = NULL,
  use_groups = TRUE,
  x_order = c("group", "given"),
  thresholds = 0.75,
  threshold_colors = NULL,
  colors = NULL,
  legend_title = "Outcome",
  show_legend = NULL,
  bar_width = 0.75,
  dodge_width = 0.8,
  base_size = 22,
  verbose = TRUE,
  bracket_text_size = 4.5
)
}
\arguments{
\item{predictors}{Character vector of predictor keys (defines x-axis order/inclusion).}

\item{pdelta_mat}{Optional numeric matrix (iterations x predictors) for a single outcome.}

\item{outcome_name}{Optional single character label for \code{pdelta_mat} (required if \code{pdelta_mat} is used).}

\item{pdelta_list}{Optional \strong{named list} of numeric matrices (iterations x predictors), one per outcome.
List names are used as outcome labels. If provided, \code{pdelta_mat}/\code{outcome_name} are ignored.}

\item{outcomes}{Optional character vector to subset outcomes (must match names in \code{pdelta_list}
or \code{outcome_name} for the single-matrix case).}

\item{outcome_labels}{Optional named vector mapping outcome key -> pretty label used in the legend.
Defaults to identity mapping for present outcomes.}

\item{predictor_labels}{Optional named vector mapping predictor key -> pretty x-axis label.
Defaults to the keys.}

\item{group_map}{Optional named vector mapping predictor key -> group label (for grouping bands).}

\item{group_levels}{Optional character vector giving the order of the groups (required if grouping used).}

\item{use_groups}{Logical; if FALSE, turns grouping off entirely (ordering + bands). Default TRUE.}

\item{x_order}{"group" (grouped then predictor order) or "given" (exact \code{predictors} order).
If \code{use_groups=FALSE}, coerced to "given".}

\item{thresholds}{Numeric vector of horizontal reference lines (e.g., \code{c(0.5, 0.9)}).}

\item{threshold_colors}{Optional same-length vector of colors for \code{thresholds}.}

\item{colors}{Optional color spec for outcomes: either a single color, or a named vector
mapping pretty outcome names -> colors.}

\item{legend_title}{Character; title for the outcome legend (default "Outcome").}

\item{show_legend}{NULL (auto: hide if only one outcome), TRUE, or FALSE.}

\item{bar_width}{Width of bars (default 0.75).}

\item{dodge_width}{Dodge width for grouped bars (default 0.8).}

\item{base_size}{Base font size for theme (default 22).}

\item{verbose}{Logical; print brief diagnostics (default TRUE).}

\item{bracket_text_size}{Font size for the group names (default 4.5, different scale then base_size)}
}
\value{
A list with \item{plot}{ggplot object} and \item{data}{data.frame used for plotting}.
}
\description{
Plot Posterior Inclusion Probabilities (PIPs) per predictor, across one or more
outcomes, computed as column means of MCMC indicator matrices. Supply either:
(i) a single matrix \code{pdelta_mat} (iterations Ã— predictors) with an \code{outcome_name},
(i) a single matrix \code{pdelta_mat} (iterations x predictors) with an \code{outcome_name},
or (ii) a named list \code{pdelta_list} of such matrices (one per outcome).
The argument \code{predictors} fixes x-axis order and inclusion.
}
\examples{
\dontrun{
# Single outcome
set.seed(1)
predictors <- paste0("x", 1:6)
pdelta_mat <- matrix(rbinom(2000, 1, prob = runif(6, 0.1, 0.9)), ncol = 6)
res1 <- plot_pdelta_bars_mcmc(
  predictors   = predictors,
  pdelta_mat   = pdelta_mat,
  outcome_name = "Breast (female)",
  thresholds   = c(0.5, 0.9)
)
print(res1$plot)

# Multiple outcomes
pdelta_list <- list(
  "Breast (female)" = matrix(rbinom(3000, 1, prob = runif(6, 0.2, 0.8)), ncol = 6),
  "Prostate (male)" = matrix(rbinom(3000, 1, prob = runif(6, 0.1, 0.6)), ncol = 6)
)
res2 <- plot_pdelta_bars_mcmc(
  predictors       = predictors,
  pdelta_list      = pdelta_list,
  predictor_labels = setNames(toupper(predictors), predictors),
  group_map        = c(x1="Demog", x2="Demog", x3="Behavior", x4="Behavior", x5="Access", x6="Access"),
  group_map = c(x1="Demog", x2="Demog", x3="Behavior",
  x4="Behavior", x5="Access", x6="Access"),
  group_levels     = c("Demog","Behavior","Access"),
  thresholds       = c(0.5, 0.9),
  legend_title     = "Cancer"
)
print(res2$plot)
}

}
